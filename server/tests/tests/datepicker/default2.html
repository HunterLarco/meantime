<!DOCTYPE html>
<style>



body{
  padding:0px;
  margin:0px;
  font-family:'arial';
}



#scroller{
  position:fixed;
  top:0px;
  left:0px;
  height:100%;
  width:100%;
  overflow:hidden;
}
#scroller p:first-child{
  background:red;
}
#scroller p:last-child{
  background:blue;
}



</style>
<html>
<head>
<meta charset="utf-8" />
<meta name="format-detection" content="telephone=no" />
<meta name="msapplication-tap-highlight" content="no" />
<!-- WARNING: for iOS 7, remove the width=device-width and height=device-height attributes. See https://issues.apache.org/jira/browse/CB-4323 -->
<meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width, height=device-height, target-densitydpi=device-dpi" />
<title>Sealed</title>
</head>


<div id='scroller'>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
  <p>testing</p>
</div>



<script type='text/javascript'>


function SnapScroller(elem){
  var self = this;
  
  
  var mouse = {},
      friction = 0.92;
  
  
  elem.addEventListener('touchstart', MouseDown);
  
  
  function MouseDown(event){
    if(running) stopMove = true;
    
    var touch = event.touches[0];
    mouse.lastx = touch.pageX;
    mouse.lasty = touch.pageY;
    mouse.lasttime = Date.now();
    mouse.velocity = {x:0,y:0};
    document.addEventListener('touchmove', MouseMove);
    document.addEventListener('touchend', MouseUp);
  }
  
  
  var lastRender, stopMove = false, running = false;
  function ContinueMove(){
    if(!lastRender){
      lastRender = Date.now()-20;
      running = true;
      requestAnimationFrame(ContinueMove);
      return;
    }
    
    // timediff in seconds
    var timediff = (Date.now() - lastRender) / 1000,
        delta = {
          x: mouse.velocity.x * timediff * elem.offsetWidth,
          y: mouse.velocity.y * timediff * elem.offsetHeight
        };
    
    elem.scrollTop = Math.max(0, Math.min(elem.scrollTop+delta.y, elem.scrollHeight-elem.offsetHeight));
    
    mouse.velocity.x *= friction;
    mouse.velocity.y *= friction;
    
    console.log(delta)
    
    if(stopMove || elem.scrollTop == 0 || elem.scrollTop == elem.scrollHeight || (Math.abs(delta.x) < 1 && Math.abs(delta.y) < 1)){
      stopMove = false;
      running = false;
      lastRender = null;
      return;
    }
    
    lastRender = Date.now();
    requestAnimationFrame(ContinueMove);
  }
  
  
  
  function MouseUp(event){
    document.removeEventListener('touchmove', MouseMove);
    document.removeEventListener('touchend', MouseUp);
    
    ContinueMove();
  }
  
  
  
  function MouseMove(event){
    var touch = event.touches[0],
        delta = {
          x: mouse.lastx-touch.pageX,
          y: mouse.lasty-touch.pageY
        },
        deltaPageUnit = {
          x: delta.x / elem.offsetWidth,
          y: delta.y / elem.offsetHeight
        },
        // timediff in seconds
        timediff = (Date.now()-mouse.lasttime) / 1000,
        touch_velocity = {
          x: deltaPageUnit.x / timediff,
          y: deltaPageUnit.y / timediff
        },
        velocity = {
          x: Math.max(Math.abs(mouse.velocity.x), Math.abs(touch_velocity.x)) * (delta.x<0?-1:1),
          y: Math.max(Math.abs(mouse.velocity.y), Math.abs(touch_velocity.y)) * (delta.y<0?-1:1)
        };
    mouse.velocity = {
      x: velocity.x*friction,
      y: velocity.y*friction
    };
    mouse.lastx = touch.pageX;
    mouse.lasty = touch.pageY;
    mouse.lasttime = Date.now();
    
    elem.scrollTop = Math.max(0, Math.min(elem.scrollTop+delta.y, elem.scrollHeight-elem.offsetHeight));
    
    event.preventDefault();
  }
}



window.onload = function(){
  new SnapScroller(document.getElementById('scroller'));
}




</script>
</body>
</html>
